<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Risk Alerts & Analysis System</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box }
        body{
            font-family:"Times New Roman",serif;
            background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
            min-height:100vh;
            display:flex;
            justify-content:center;
            align-items:center;
            padding:40px 20px;
        }
        .container{
            background:#fff;
            border-radius:8px;
            padding:40px;
            box-shadow:0 4px 20px rgba(0,0,0,.1);
            max-width:1600px;
            width:100%;
        }
        .header{ text-align:center; margin-bottom:22px; }
        .header h1{ font-size:28px; font-weight:bold; }

        svg{ width:100%; height:auto; display:block; }
        .entity{ fill:#4a90e2; stroke:#2c5aa0; stroke-width:2; }
        .relationship{ fill:#50c878; stroke:#2d7a4f; stroke-width:2; }
        .attribute{ fill:#ffd700; stroke:#cc9900; stroke-width:1.5; }
        .aggregation-box{ fill:none; stroke:#e74c3c; stroke-width:3; }
        .line{ stroke:#5a5a5a; stroke-width:1.5; fill:none; }
        .double-line{ stroke:#e74c3c; stroke-width:1.5; fill:none; }
        .entity-text{ font-size:16px; font-weight:bold; fill:#fff; }
        .relationship-text{ font-size:14px; fill:#fff; text-transform:uppercase; }
        .attribute-text{ font-size:13px; fill:#000; }
        .underline{ text-decoration:underline; font-weight:bold; }
        .cardinality-text{ font-size:16px; font-weight:bold; fill:#e74c3c; }
        .aggregation-label{ font-size:14px; font-weight:bold; fill:#e74c3c; font-style:italic; }
        .constraint-text{ font-size:12px; fill:#000; }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>Risk Alerts & Analysis System</h1>
        </div>

        <svg viewBox="0 0 1500 980" xmlns="http://www.w3.org/2000/svg">

            <!-- ================== AGGREGATION BOX ================== -->
            <rect x="10" y="20" width="525" height="700" class="aggregation-box" rx="10" />
            <!-- moved label down to match taller box -->
            <text x="270" y="745" text-anchor="middle" class="aggregation-label">«Health Event History»</text>

            <!-- ================== FAMILY_MEMBER (SHIFTED DOWN + TOP FIX) ================== -->
            <rect x="140" y="145" width="220" height="60" class="entity" />
            <text x="250" y="180" text-anchor="middle" class="entity-text">FAMILY_MEMBER</text>

            <!-- top attributes (shifted down + spaced) -->
            <ellipse cx="150" cy="100" rx="60" ry="18" class="attribute" />
            <text x="150" y="105" text-anchor="middle" class="attribute-text">
                <tspan class="underline">member_id</tspan>
            </text>
            <line x1="150" y1="118" x2="200" y2="145" class="line" />

            <ellipse cx="300" cy="100" rx="55" ry="18" class="attribute" />
            <text x="300" y="105" text-anchor="middle" class="attribute-text">first_name</text>
            <line x1="300" y1="118" x2="275" y2="145" class="line" />

            <ellipse cx="420" cy="100" rx="55" ry="18" class="attribute" />
            <text x="420" y="105" text-anchor="middle" class="attribute-text">last_name</text>
            <line x1="420" y1="118" x2="340" y2="145" class="line" />

            <!-- user_ID (FK) (moved down slightly) + diagonal connector to avoid crossing first_name -->
            <ellipse cx="250" cy="60" rx="72" ry="18" class="attribute" />
            <text x="250" y="65" text-anchor="middle" class="attribute-text">user_ID (FK)</text>
            <line x1="250" y1="78" x2="230" y2="145" class="line" />

            <!-- left attributes (shifted down) -->
            <ellipse cx="75" cy="165" rx="40" ry="18" class="attribute" />
            <text x="75" y="170" text-anchor="middle" class="attribute-text">gender</text>
            <line x1="115" y1="165" x2="140" y2="165" class="line" />

            <ellipse cx="75" cy="210" rx="38" ry="18" class="attribute" />
            <text x="75" y="215" text-anchor="middle" class="attribute-text">status</text>
            <line x1="113" y1="210" x2="140" y2="200" class="line" />

            <!-- right attributes (shifted down) -->
            <ellipse cx="465" cy="150" rx="70" ry="18" class="attribute" />
            <text x="465" y="155" text-anchor="middle" class="attribute-text">date_of_birth</text>
            <line x1="395" y1="155" x2="360" y2="160" class="line" />

            <ellipse cx="465" cy="205" rx="60" ry="18" class="attribute" />
            <text x="465" y="210" text-anchor="middle" class="attribute-text">relationship</text>
            <line x1="405" y1="205" x2="360" y2="190" class="line" />

            <!-- bottom attributes (shifted down) -->
            <ellipse cx="150" cy="265" rx="70" ry="18" class="attribute" />
            <text x="150" y="270" text-anchor="middle" class="attribute-text">contact_phone</text>
            <line x1="180" y1="247" x2="225" y2="205" class="line" />

            <ellipse cx="340" cy="265" rx="78" ry="18" class="attribute" />
            <text x="340" y="270" text-anchor="middle" class="attribute-text">medical_history</text>
            <line x1="320" y1="247" x2="285" y2="205" class="line" />

            <!-- ================== HAS_EVENT (SHIFTED DOWN) ================== -->
            <polygon points="250,305 305,360 250,415 195,360" class="relationship" />
            <text x="250" y="365" text-anchor="middle" class="relationship-text">HAS_EVENT</text>

            <line x1="250" y1="205" x2="250" y2="305" class="line" />
            <text x="265" y="255" class="cardinality-text">1</text>

            <!-- ================== HEALTH_EVENT (SHIFTED DOWN) ================== -->
            <rect x="150" y="485" width="220" height="60" class="entity" />
            <text x="260" y="520" text-anchor="middle" class="entity-text">HEALTH_EVENT</text>

            <line x1="250" y1="415" x2="250" y2="485" class="line" />
            <text x="265" y="455" class="cardinality-text">M</text>

            <!-- HEALTH_EVENT attributes (shifted down) -->
            <ellipse cx="110" cy="435" rx="52" ry="18" class="attribute" />
            <text x="110" y="440" text-anchor="middle" class="attribute-text">
                <tspan class="underline">event_id</tspan>
            </text>
            <line x1="135" y1="448" x2="170" y2="485" class="line" />

            <ellipse cx="410" cy="435" rx="50" ry="18" class="attribute" />
            <text x="410" y="440" text-anchor="middle" class="attribute-text">event_date</text>
            <line x1="385" y1="448" x2="350" y2="485" class="line" />

            <ellipse cx="480" cy="485" rx="50" ry="18" class="attribute" />
            <text x="480" y="490" text-anchor="middle" class="attribute-text">event_type</text>
            <line x1="430" y1="490" x2="370" y2="500" class="line" />

            <ellipse cx="75" cy="515" rx="35" ry="18" class="attribute" />
            <text x="75" y="520" text-anchor="middle" class="attribute-text">severity</text>
            <line x1="110" y1="515" x2="150" y2="515" class="line" />

            <ellipse cx="450" cy="525" rx="45" ry="18" class="attribute" />
            <text x="450" y="530" text-anchor="middle" class="attribute-text">diagnosis</text>
            <line x1="405" y1="525" x2="370" y2="520" class="line" />

            <ellipse cx="160" cy="600" rx="45" ry="18" class="attribute" />
            <text x="160" y="605" text-anchor="middle" class="attribute-text">symptoms</text>
            <line x1="175" y1="582" x2="195" y2="545" class="line" />

            <ellipse cx="250" cy="600" rx="45" ry="18" class="attribute" />
            <text x="250" y="605" text-anchor="middle" class="attribute-text">treatment</text>
            <line x1="250" y1="582" x2="250" y2="545" class="line" />

            <ellipse cx="340" cy="600" rx="42" ry="18" class="attribute" />
            <text x="340" y="605" text-anchor="middle" class="attribute-text">outcome</text>
            <line x1="325" y1="582" x2="305" y2="545" class="line" />

            <!-- ================== RECEIVES ================== -->
            <polygon points="700,160 760,220 700,280 640,220" class="relationship" />
            <text x="700" y="225" text-anchor="middle" class="relationship-text">RECEIVES</text>

<polyline points="360,170 520,170 640,220" class="line" />
            <text x="440" y="145" class="cardinality-text">1</text>

            <!-- ================== DERIVED_FROM ================== -->
            <polygon points="700,340 760,400 700,460 640,400" class="relationship" />
            <text x="700" y="395" text-anchor="middle" class="relationship-text">DERIVED</text>
            <text x="700" y="412" text-anchor="middle" class="relationship-text">FROM</text>

            <line x1="530" y1="400" x2="640" y2="400" class="line" />
            <text x="545" y="390" class="cardinality-text">1</text>

            <!-- ================== ALERT ================== -->
            <rect x="1050" y="310" width="240" height="60" class="entity" />
            <text x="1170" y="345" text-anchor="middle" class="entity-text">ALERT</text>

            <ellipse cx="1040" cy="250" rx="42" ry="18" class="attribute" />
            <text x="1040" y="255" text-anchor="middle" class="attribute-text">
                <tspan class="underline">alert_id</tspan>
            </text>
            <line x1="1060" y1="263" x2="1100" y2="310" class="line" />

            <ellipse cx="1170" cy="240" rx="45" ry="18" class="attribute" />
            <text x="1170" y="245" text-anchor="middle" class="attribute-text">risk_level</text>
            <line x1="1170" y1="258" x2="1170" y2="310" class="line" />

            <ellipse cx="1300" cy="250" rx="50" ry="18" class="attribute" />
            <text x="1300" y="255" text-anchor="middle" class="attribute-text">alert_type</text>
            <line x1="1280" y1="263" x2="1240" y2="310" class="line" />

            <ellipse cx="1390" cy="320" rx="40" ry="18" class="attribute" />
            <text x="1390" y="325" text-anchor="middle" class="attribute-text">priority</text>
            <line x1="1350" y1="325" x2="1290" y2="330" class="line" />

            <ellipse cx="1390" cy="360" rx="35" ry="18" class="attribute" />
            <text x="1390" y="365" text-anchor="middle" class="attribute-text">status</text>
            <line x1="1355" y1="360" x2="1290" y2="350" class="line" />

            <ellipse cx="1170" cy="455" rx="60" ry="18" class="attribute" />
            <text x="1170" y="460" text-anchor="middle" class="attribute-text">resolved_date</text>
            <line x1="1170" y1="437" x2="1170" y2="370" class="line" />

            <ellipse cx="1045" cy="495" rx="55" ry="18" class="attribute" />
            <text x="1045" y="500" text-anchor="middle" class="attribute-text">description</text>
            <line x1="1075" y1="482" x2="1120" y2="370" class="line" />

            <ellipse cx="1295" cy="495" rx="55" ry="18" class="attribute" />
            <text x="1295" y="500" text-anchor="middle" class="attribute-text">created_date</text>
            <line x1="1265" y1="482" x2="1220" y2="370" class="line" />

            <!-- member_ID (FK) -->
            <ellipse cx="980" cy="340" rx="55" ry="18" class="attribute" />
            <text x="980" y="345" text-anchor="middle" class="attribute-text">member_ID (FK)</text>
            <line x1="1035" y1="340" x2="1050" y2="340" class="line" />

            <!-- ================== TOTAL PARTICIPATION (DOUBLE LINES) ================== -->
            <line x1="760" y1="220" x2="1050" y2="332" class="double-line" />
            <line x1="760" y1="224" x2="1050" y2="336" class="double-line" />
            <text x="910" y="265" class="cardinality-text">M</text>

            <line x1="760" y1="400" x2="1050" y2="348" class="double-line" />
            <line x1="760" y1="404" x2="1050" y2="352" class="double-line" />
            <text x="910" y="395" class="cardinality-text">M</text>

            <!-- ================== CONSTRAINTS BOX ================== -->
            <rect x="560" y="680" width="860" height="210" class="entity" rx="6" />
            <text x="990" y="710" text-anchor="middle" class="entity-text">Constraints</text>
            <line x1="575" y1="720" x2="1405" y2="720" class="line" />

            <text x="585" y="750" class="constraint-text">1. Domain Constraints:</text>
            <text x="605" y="770" class="constraint-text">• status ∈ {Active, Resolved}</text>
            <text x="605" y="790" class="constraint-text">• risk_level ∈ {Low, Moderate, High}</text>

            <text x="585" y="820" class="constraint-text">2. Structural Constraints:</text>
            <text x="605" y="840" class="constraint-text">• Every ALERT must be associated with exactly one FAMILY_MEMBER (via RECEIVES)</text>
            <text x="605" y="860" class="constraint-text">• ALERT has total participation in RECEIVES and DERIVED_FROM (double lines)</text>
            <text x="605" y="880" class="constraint-text">• Each ALERT is derived from exactly one Health Event History aggregation (1:M)</text>

        </svg>
    </div>
</body>
</html>
